"use strict";var f=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var v=(t,e)=>{for(var o in e)s(t,o,{get:e[o],enumerable:!0})},i=(t,e,o,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of g(e))!h.call(t,r)&&r!==o&&s(t,r,{get:()=>e[r],enumerable:!(a=m(e,r))||a.enumerable});return t};var R=(t,e,o)=>(o=t!=null?f(y(t)):{},i(e||!t||!t.__esModule?s(o,"default",{value:t,enumerable:!0}):o,t)),P=t=>i(s({},"__esModule",{value:!0}),t);var b={};v(b,{default:()=>T});module.exports=P(b);var n=require("@raycast/api");var c=require("@raycast/api"),u=require("child_process"),l=R(require("util")),S=l.default.promisify(u.exec),x=(0,c.getPreferenceValues)(),F="/Applications/Cloudflare WARP.app/Contents/Resources/warp-cli",C=x.wrapCliPath??F;async function d(t){let{stdout:e}=await S(`"${C}" -j ${t}`);return JSON.parse(e)}async function w(){try{let{status:t}=await d("disconnect");if(t==="Success")return!0;throw new Error("Failed to connect")}catch(t){return console.error(t),!1}}async function p(){let{status:t,reason:e}=await d("status");return t==="Disconnected"?{status:"disconnected",disconnectReason:e??"unknown"}:t==="Connected"?{status:"connected",disconnectReason:""}:{status:"unknown",disconnectReason:"unknown"}}var T=async()=>{try{if((await p()).status==="disconnected"){await(0,n.showHUD)("Not connected",{clearRootSearch:!0,popToRootType:n.PopToRootType.Immediate});return}if(await w()){await(0,n.showHUD)("Disconnected",{clearRootSearch:!0,popToRootType:n.PopToRootType.Immediate});return}throw new Error("Failed to disconnect")}catch{await(0,n.showToast)({style:n.Toast.Style.Failure,title:"Failed to disconnect"})}};
